!function(o){"use strict";function t(o,t){if(t=t||function(){},console.log(localStorage),this._dbName=o,!localStorage[o]){localStorage[o]=JSON.stringify({todos:[]})}t.call(this,JSON.parse(localStorage[o]))}t.prototype.find=function(o,t){if(t){var a=JSON.parse(localStorage[this._dbName]).todos;t.call(this,a.filter(function(t){for(var a in o)if(o[a]!==t[a])return!1;return!0}))}},t.prototype.findAll=function(o){(o=o||function(){}).call(this,JSON.parse(localStorage[this._dbName]).todos)},t.prototype.save=function(o,t,a){var i=JSON.parse(localStorage[this._dbName]),r=i.todos;if(t=t||function(){},a){for(var e=0;e<r.length;e++)if(r[e].id===a){for(var l in o)r[e][l]=o[l];break}localStorage[this._dbName]=JSON.stringify(i),t.call(this,r)}else o.id=Date.now(),r.push(o),localStorage[this._dbName]=JSON.stringify(i),t.call(this,[o])},t.prototype.remove=function(o,t){for(var a,i=JSON.parse(localStorage[this._dbName]),r=i.todos,e=0;e<r.length;e++)r[e].id==o&&(a=r[e].id);for(e=0;e<r.length;e++)r[e].id==a&&r.splice(e,1);localStorage[this._dbName]=JSON.stringify(i),t.call(this,r)},t.prototype.drop=function(o){var t={todos:[]};localStorage[this._dbName]=JSON.stringify(t),o.call(this,t.todos)},o.app=o.app||{},o.app.Store=t}(window);